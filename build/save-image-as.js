window.SaveImageAs=function(){var e={743:function(e,t,a){var o;void 0===(o=function(e,t){"use strict";var a,o;Object.defineProperty(t,"__esModule",{value:!0}),t.WEBP=t.JPEG=t.PNG=t.ERejectReason=t.EExportFormat=void 0,function(e){e.JPG="image/jpeg",e.PNG="image/png",e.GIF="image/gif",e.WEBP="image/webp",e.TIFF="image/tiff"}(a=t.EExportFormat||(t.EExportFormat={})),function(e){e.COULD_NOT_READ="COULD_NOT_READ",e.ABORTED="ABORTED",e.EMPTY_TRANSFER="EMPTY_TRANSFER",e.IMAGE_COULD_NOT_LOADED="IMAGE_COULD_NOT_LOADED",e.FILE_HAS_NO_READIBLE_DATA="FILE_HAS_NO_READIBLE_DATA",e.NO_IMAGE_FILE_SELECTED="NO_IMAGE_FILE_SELECTED"}(o=t.ERejectReason||(t.ERejectReason={}));class i{constructor({maxImageWidth:e=200,exportFormat:t=a.PNG,exportQuality:o=.7}){this.maxImageWidth=e,this.exportFormat=t,this.exportQuality=o}cleanUp(e){document.body.removeChild(e)}imageLoaded(e){return new Promise(((t,a)=>{const i=document.createElement("canvas"),r=i.getContext("2d"),n=this.maxImageWidth<e.width?e.width/this.maxImageWidth:1;i.width=e.width/n,i.height=e.height/n,null==r||r.drawImage(e,0,0,i.width,i.height);const E=new FileReader;E.onloadend=()=>{const{result:a}=E;this.cleanUp(e),t((null==a?void 0:a.toString())||"")},E.onerror=()=>{this.cleanUp(e),a(o.COULD_NOT_READ)},E.onabort=()=>{this.cleanUp(e),a(o.ABORTED)},i.toBlob((t=>{null!==t?E.readAsDataURL(t):(this.cleanUp(e),a(o.EMPTY_TRANSFER))}),this.exportFormat,this.exportQuality)}))}imageData(e){return new Promise(((t,a)=>{const i=document.createElement("img");document.body.appendChild(i),i.style.position="fixed",i.style.opacity="0",i.style.left=-100*this.maxImageWidth+"px",i.addEventListener("load",(()=>{t(this.imageLoaded(i))})),i.addEventListener("error",(()=>{a(o.IMAGE_COULD_NOT_LOADED),this.cleanUp(i)})),i.src=e}))}onChange(e){const t=e.target;return new Promise(((e,a)=>{if((null==t?void 0:t.files)&&t.files.length>0){const i=new FileReader;i.onload=t=>{var i;const r=null===(i=t.target)||void 0===i?void 0:i.result;r?e(this.imageData(r.toString())):a(o.FILE_HAS_NO_READIBLE_DATA)},i.readAsDataURL(t.files[0])}else a(o.NO_IMAGE_FILE_SELECTED)}))}}t.PNG=(e,t)=>new i({maxImageWidth:e,exportFormat:a.PNG,exportQuality:t}),t.JPEG=(e,t)=>new i({maxImageWidth:e,exportFormat:a.JPG,exportQuality:t}),t.WEBP=(e,t)=>new i({maxImageWidth:e,exportFormat:a.WEBP,exportQuality:t})}.apply(t,[a,t]))||(e.exports=o)}},t={};return function a(o){if(t[o])return t[o].exports;var i=t[o]={exports:{}};return e[o](i,i.exports,a),i.exports}(743)}();