self.SaveImageAs=(()=>{"use strict";var e={925:(e,t,a)=>{var o,r;a.r(t),a.d(t,{GIF:()=>l,JPEG:()=>m,PNG:()=>n,SVG:()=>E,TIFF:()=>d,WEBP:()=>s}),function(e){e.JPG="image/jpeg",e.PNG="image/png",e.GIF="image/gif",e.WEBP="image/webp",e.TIFF="image/tiff",e.SVG="image/svg+xml"}(o||(o={})),function(e){e.COULD_NOT_READ="COULD_NOT_READ",e.ABORTED="ABORTED",e.EMPTY_TRANSFER="EMPTY_TRANSFER",e.IMAGE_COULD_NOT_LOADED="IMAGE_COULD_NOT_LOADED",e.FILE_HAS_NO_READIBLE_DATA="FILE_HAS_NO_READIBLE_DATA",e.NO_IMAGE_FILE_SELECTED="NO_IMAGE_FILE_SELECTED"}(r||(r={}));class i{constructor({maxImageWidth:e=200,exportFormat:t=o.PNG,exportQuality:a=.7}){if(e<0||isNaN(e))throw new Error("`maxImageWidth` should be positive number");if(!Object.values(o).includes(t))throw new Error(`"exportFormat" must be one of: ${Object.values(o).toString()}`);if(isNaN(a)||a<0||a>1)throw new Error("`exportQuality` must be between 0 and 1");this.maxImageWidth=e,this.exportFormat=t,this.exportQuality=a}cleanUp(e){document.body.removeChild(e)}imageLoaded(e){return new Promise(((t,a)=>{const o=document.createElement("canvas"),i=o.getContext("2d"),n=this.maxImageWidth<e.width?e.width/this.maxImageWidth:1;o.width=e.width/n,o.height=e.height/n,null==i||i.drawImage(e,0,0,o.width,o.height);const m=new FileReader;m.onloadend=()=>{const{result:a}=m;this.cleanUp(e),t((null==a?void 0:a.toString())||"")},m.onerror=()=>{this.cleanUp(e),a(r.COULD_NOT_READ)},m.onabort=()=>{this.cleanUp(e),a(r.ABORTED)},o.toBlob((t=>{null!==t?m.readAsDataURL(t):(this.cleanUp(e),a(r.EMPTY_TRANSFER))}),this.exportFormat,this.exportQuality)}))}imageData(e){return new Promise(((t,a)=>{const o=document.createElement("img");document.body.appendChild(o),o.style.position="fixed",o.style.opacity="0",o.style.left=-100*this.maxImageWidth+"px",o.addEventListener("load",(()=>{t(this.imageLoaded(o))})),o.addEventListener("error",(()=>{a(r.IMAGE_COULD_NOT_LOADED),this.cleanUp(o)})),o.src=e}))}onChange(e){const t=e.target;return new Promise(((e,a)=>{if((null==t?void 0:t.files)&&t.files.length>0){const o=new FileReader;o.onload=t=>{var o;const i=null===(o=t.target)||void 0===o?void 0:o.result;i?e(this.imageData(i.toString())):a(r.FILE_HAS_NO_READIBLE_DATA)},o.readAsDataURL(t.files[0])}else a(r.NO_IMAGE_FILE_SELECTED)}))}}const n=(e,t)=>new i({maxImageWidth:e,exportFormat:o.PNG,exportQuality:t}),m=(e,t)=>new i({maxImageWidth:e,exportFormat:o.JPG,exportQuality:t}),s=(e,t)=>new i({maxImageWidth:e,exportFormat:o.WEBP,exportQuality:t}),l=(e,t)=>new i({maxImageWidth:e,exportFormat:o.GIF,exportQuality:t}),d=(e,t)=>new i({maxImageWidth:e,exportFormat:o.TIFF,exportQuality:t}),E=(e,t)=>new i({maxImageWidth:e,exportFormat:o.SVG,exportQuality:t})}},t={};function a(o){if(t[o])return t[o].exports;var r=t[o]={exports:{}};return e[o](r,r.exports,a),r.exports}return a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a(925)})();
//# sourceMappingURL=save-image-as.js.map